define("discourse/plugins/discourse-data-explorer/admin/adapters/query",["exports","admin/adapters/build-plugin"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.default)("explorer").extend({})})),define("discourse/plugins/discourse-data-explorer/discourse/components/code-view",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"wTTbT+uR",block:'[[[10,"pre"],[12],[10,"code"],[15,0,[30,1]],[12],[1,[30,2]],[13],[13]],["@codeClass","@value"],false,[]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/code-view.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/data-explorer-bar-chart",["exports","@ember/component","@glimmer/component","@ember/object","discourse/lib/load-script","discourse-common/utils/decorators","discourse/plugins/discourse-data-explorer/discourse/lib/themeColor","@ember/template-factory"],(function(e,t,r,o,i,n,s,l){"use strict"
var a
function u(e,t,r){var o
return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var o=r.call(e,t||"default")
if("object"!=typeof o)return o
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const p=(0,l.createTemplateFactory)({id:"rMRjbU49",block:'[[[11,"canvas"],[4,[38,0],[[30,0,["initChart"]]],null],[4,[38,1],["change",[30,0,["updateChartData"]]],null],[12],[13]],[],false,["did-insert","on"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/data-explorer-bar-chart.hbs",isStrictMode:!1})
let d=e.default=(a=class extends r.default{constructor(){super(...arguments),u(this,"chart",void 0),u(this,"barsColor",(0,s.default)("--tertiary")),u(this,"barsHoverColor",(0,s.default)("--tertiary-high")),u(this,"gridColor",(0,s.default)("--primary-low")),u(this,"labelsColor",(0,s.default)("--primary-medium"))}get config(){return{type:"bar",data:this.data,options:this.options}}get data(){return{labels:this.args.labels,datasets:[{label:this.args.datasetName,data:this.args.values,backgroundColor:this.barsColor,hoverBackgroundColor:this.barsHoverColor}]}}get options(){return{scales:{legend:{labels:{fontColor:this.labelsColor}},xAxes:[{gridLines:{color:this.gridColor,zeroLineColor:this.gridColor},ticks:{fontColor:this.labelsColor}}],yAxes:[{gridLines:{color:this.gridColor,zeroLineColor:this.gridColor},ticks:{beginAtZero:!0,fontColor:this.labelsColor}}]}}}async initChart(e){await(0,i.default)("/javascripts/Chart.min.js")
const t=e.getContext("2d")
this.chart=new Chart(t,this.config)}updateChartData(){this.chart.data=this.data,this.chart.update()}willDestroy(){super.willDestroy(...arguments),this.chart.destroy()}},c(a.prototype,"initChart",[n.bind],Object.getOwnPropertyDescriptor(a.prototype,"initChart"),a.prototype),c(a.prototype,"updateChartData",[o.action],Object.getOwnPropertyDescriptor(a.prototype,"updateChartData"),a.prototype),a);(0,t.setComponentTemplate)(p,d)})),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/utils","discourse-common/utils/decorators","@ember/template-factory"],(function(e,t,r,o,i,n,s,l){"use strict"
var a,u,c,p,d
function m(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function h(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const b=(0,l.createTemplateFactory)({id:"q90m2Gd1",block:'[[[41,[30,0,["hideSchema"]],[[[1,"  "],[8,[39,1],[[24,0,"no-text unhide"]],[["@action","@icon"],[[30,0,["expandSchema"]],"chevron-left"]],null],[1,"\\n"]],[]],[[[1,"  "],[10,0],[14,0,"schema"],[12],[1,"\\n    "],[10,0],[14,0,"schema-search inline-form full-width"],[12],[1,"\\n      "],[11,"input"],[24,4,"text"],[4,[38,2],["input",[28,[37,3],[[30,0],"filterChanged"],[["value"],["target.value"]]]],null],[12],[13],[1,"\\n      "],[8,[39,1],[[24,0,"no-text"]],[["@action","@icon"],[[30,0,["collapseSchema"]],"chevron-right"]],null],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"schema-container"],[12],[1,"\\n      "],[8,[39,4],null,[["@condition"],[[30,0,["loading"]]]],[["default"],[[[[1,"\\n        "],[10,"ul"],[12],[1,"\\n"],[42,[28,[37,6],[[28,[37,6],[[30,0,["filteredTables"]]],null]],null],null,[[[1,"            "],[8,[39,7],null,[["@table"],[[30,1]]],null],[1,"\\n"]],[1]],null],[1,"        "],[13],[1,"\\n      "]],[]]]]],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]]]],["table"],false,["if","d-button","on","action","conditional-loading-spinner","each","-track-array","explorer-schema/one-table"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema.hbs",isStrictMode:!1})
let y=e.default=(a=(0,s.debounce)(500),u=class extends r.default{constructor(){super(...arguments),m(this,"filter",c,this),m(this,"loading",p,this),m(this,"hideSchema",d,this)}get transformedSchema(){const e=this.args.schema
for(const t in e)e.hasOwnProperty(t)&&e[t].forEach((e=>{const t=[]
e.primary&&t.push("primary key"),e.is_nullable&&t.push("null"),e.column_default&&t.push("default "+e.column_default),e.fkey_info&&t.push("fkey "+e.fkey_info),e.denormal&&t.push("denormal "+e.denormal)
const r=t.join(", ")
r&&(e.notes=r),(e.enum||e.column_desc)&&(e.havepopup=!0),e.havetypeinfo=!!(e.notes||e.enum||e.column_desc)}))
return e}get filteredTables(){let e=[],t=this.filter
try{(0,n.isBlank)(this.filter)||(t=new RegExp(this.filter))}catch{t=null}const r=!!t
for(const o in this.transformedSchema)if(this.transformedSchema.hasOwnProperty(o))if(r)if(t.source===o||t.source+"s"===o)e.unshift({name:o,columns:this.transformedSchema[o],open:r})
else if(t.test(o))e.push({name:o,columns:this.transformedSchema[o],open:r})
else{let i=[]
this.transformedSchema[o].forEach((e=>{t.source===e.column_name?i.unshift(e):t.test(e.column_name)&&i.push(e)})),(0,n.isEmpty)(i)||e.push({name:o,columns:i,open:r})}else e.push({name:o,columns:this.transformedSchema[o],open:!1})
return e}updateFilter(e){this.filter=e,this.loading=!1}filterChanged(e){this.loading=!0,this.updateFilter(e)}collapseSchema(){this.hideSchema=!0,this.args.updateHideSchema(!0)}expandSchema(){this.hideSchema=!1,this.args.updateHideSchema(!1)}},c=h(u.prototype,"filter",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=h(u.prototype,"loading",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=h(u.prototype,"hideSchema",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.hideSchema}}),h(u.prototype,"updateFilter",[a],Object.getOwnPropertyDescriptor(u.prototype,"updateFilter"),u.prototype),h(u.prototype,"filterChanged",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"filterChanged"),u.prototype),h(u.prototype,"collapseSchema",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"collapseSchema"),u.prototype),h(u.prototype,"expandSchema",[i.action],Object.getOwnPropertyDescriptor(u.prototype,"expandSchema"),u.prototype),u);(0,t.setComponentTemplate)(b,y)})),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/enum-info",["exports","@ember/component","@glimmer/component","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"M3PtpU/P",block:'[[[10,"ol"],[12],[1,"\\n"],[42,[28,[37,1],[[28,[37,1],[[30,0,["enuminfo"]]],null]],null],null,[[[1,"    "],[10,"li"],[15,2,[30,1,["value"]]],[12],[1,"\\n      "],[1,[30,1,["name"]]],[1,"\\n    "],[13],[1,"\\n"]],[1]],null],[13]],["enum"],false,["each","-track-array"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/enum-info.hbs",isStrictMode:!1})
class n extends r.default{get enuminfo(){return Object.entries(this.args.col.enum).map((e=>{let[t,r]=e
return{value:t,name:r}}))}}e.default=n,(0,t.setComponentTemplate)(i,n)})),define("discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/one-table",["exports","@ember/component","@glimmer/component","@glimmer/tracking","discourse-common/utils/decorators","@ember/template-factory"],(function(e,t,r,o,i,n){"use strict"
var s,l
function a(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const u=(0,n.createTemplateFactory)({id:"11mZj1Fa",block:'[[[10,"li"],[15,0,[29,["schema-table ",[30,0,["styles"]]]]],[12],[1,"\\n"],[1,"  "],[11,0],[24,0,"schema-table-name"],[24,"role","button"],[4,[38,0],["click",[30,0,["toggleOpen"]]],null],[12],[1,"\\n"],[41,[30,0,["open"]],[[[1,"      "],[1,[28,[35,2],["caret-down"],null]],[1,"\\n"]],[]],[[[1,"      "],[1,[28,[35,2],["caret-right"],null]],[1,"\\n"]],[]]],[1,"    "],[1,[30,1,["name"]]],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,0],[14,0,"schema-table-cols"],[12],[1,"\\n"],[41,[30,0,["open"]],[[[1,"      "],[10,"dl"],[12],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,1,["columns"]]],null]],null],null,[[[1,"          "],[10,0],[12],[1,"\\n            "],[10,"dt"],[15,0,[52,[30,2,["sensitive"]],"sensitive"]],[15,"title",[52,[30,2,["sensitive"]],[28,[37,5],["explorer.schema.sensitive"],null]]],[12],[1,"\\n"],[41,[30,2,["sensitive"]],[[[1,"                "],[1,[28,[35,2],["exclamation-triangle"],null]],[1,"\\n"]],[]],null],[1,"              "],[1,[30,2,["column_name"]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"dd"],[12],[1,"\\n              "],[1,[30,2,["data_type"]]],[1,"\\n"],[41,[30,2,["havetypeinfo"]],[[[1,"                "],[10,"br"],[12],[13],[1,"\\n"],[41,[30,2,["havepopup"]],[[[1,"                  "],[10,0],[14,0,"popup-info"],[12],[1,"\\n                    "],[1,[28,[35,2],["info"],null]],[1,"\\n                    "],[10,0],[14,0,"popup"],[12],[1,"\\n                      "],[1,[30,2,["column_desc"]]],[1,"\\n"],[41,[30,2,["enum"]],[[[1,"                        "],[8,[39,6],null,[["@col"],[[30,2]]],null],[1,"\\n"]],[]],null],[1,"                    "],[13],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"                "],[10,1],[14,0,"schema-typenotes"],[12],[1,"\\n                  "],[1,[30,2,["notes"]]],[1,"\\n                "],[13],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[2]],null],[1,"      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"],[13]],["@table","col"],false,["on","if","d-icon","each","-track-array","i18n","explorer-schema/enum-info"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/explorer-schema/one-table.hbs",isStrictMode:!1})
let c=e.default=(s=class extends r.default{constructor(){var e,t,r,o
super(...arguments),e=this,t="open",o=this,(r=l)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}get styles(){return this.open?"open":""}toggleOpen(){this.open=!this.open}},l=a(s.prototype,"open",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.args.table.open}}),a(s.prototype,"toggleOpen",[i.bind],Object.getOwnPropertyDescriptor(s.prototype,"toggleOpen"),s.prototype),s);(0,t.setComponentTemplate)(u,c)})),define("discourse/plugins/discourse-data-explorer/discourse/components/modal/query-help",["exports","discourse/components/d-modal","discourse-common/helpers/html-safe","discourse-common/helpers/i18n","@ember/template-factory","@ember/component","@ember/component/template-only"],(function(e,t,r,o,i,n,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,n.setComponentTemplate)((0,i.createTemplateFactory)({id:"DG9/T/vs",block:'[[[1,"\\n  "],[8,[32,0],null,[["@title","@closeModal"],[[28,[32,1],["explorer.help.modal_title"],null],[30,1]]],[["body"],[[[[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.auto_resolution"],null]],null]],[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.custom_params"],null]],null]],[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.default_values"],null]],null]],[1,"\\n      "],[1,[28,[32,2],[[28,[32,1],["explorer.help.data_types"],null]],null]],[1,"\\n    "]],[]]]]],[1,"\\n"]],["@closeModal"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-data-explorer/discourse/components/modal/query-help.js",scope:()=>[t.default,o.default,r.default],isStrictMode:!0}),(0,s.default)())
e.default=l})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-input",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/service","@ember/string","@ember/utils","discourse/models/category","I18n","@ember/template-factory"],(function(e,t,r,o,i,n,s,l,a,u,c){"use strict"
var p,d,m,h,b
function y(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function f(e,t,r){var o
return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var o=r.call(e,t||"default")
if("object"!=typeof o)return o
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const v=(0,c.createTemplateFactory)({id:"GvpcJnzO",block:'[[[10,0],[15,0,[29,["param ",[52,[30,0,["valid"]],"valid","invalid"]]]],[12],[1,"\\n"],[41,[28,[37,1],[[30,0,["type"]],"boolean"],null],[[[41,[30,1,["nullable"]],[[[1,"      "],[8,[39,2],[[16,3,[30,1,["identifier"]]]],[["@valueAttribute","@value","@nameProperty","@content","@onChange"],["id",[30,0,["nullableBoolValue"]],"name",[30,0,["boolTypes"]],[30,0,["updateNullableBoolValue"]]]],null],[1,"\\n"]],[]],[[[1,"      "],[8,[39,3],[[16,3,[30,1,["identifier"]]],[4,[38,4],["change",[30,0,["updateBoolValue"]]],null]],[["@type","@checked"],["checkbox",[30,0,["boolvalue"]]]],null],[1,"\\n"]],[]]],[1,"    "],[10,1],[14,0,"param-name"],[12],[1,[30,1,["identifier"]]],[13],[1,"\\n\\n"]],[]],[[[41,[28,[37,1],[[30,0,["type"]],"int"],null],[[[1,"    "],[8,[39,3],[[16,3,[30,1,["identifier"]]],[4,[38,4],["change",[30,0,["updateValue"]]],null]],[["@type","@value"],["number",[30,0,["value"]]]],null],[1,"\\n    "],[10,1],[14,0,"param-name"],[12],[1,[30,1,["identifier"]]],[13],[1,"\\n\\n"]],[]],[[[41,[28,[37,1],[[30,0,["type"]],"string"],null],[[[1,"    "],[8,[39,5],[[16,3,[30,1,["identifier"]]]],[["@value","@type","@onChange"],[[30,0,["value"]],"text",[30,0,["updateValue"]]]],null],[1,"\\n    "],[10,1],[14,0,"param-name"],[12],[1,[30,1,["identifier"]]],[13],[1,"\\n\\n"]],[]],[[[41,[28,[37,1],[[30,0,["type"]],"user_id"],null],[[[1,"    "],[8,[39,6],[[16,3,[30,1,["identifier"]]]],[["@value","@options","@onChange"],[[30,0,["value"]],[28,[37,7],null,[["maximum"],[1]]],[30,0,["updateValue"]]]],null],[1,"\\n    "],[10,1],[14,0,"param-name"],[12],[1,[30,1,["identifier"]]],[13],[1,"\\n\\n"]],[]],[[[41,[28,[37,1],[[30,0,["type"]],"group_list"],null],[[[1,"    "],[8,[39,8],null,[["@content","@value","@labelProperty","@valueProperty","@onChange"],[[30,0,["allGroups"]],[30,0,["value"]],"name","name",[30,0,["updateGroupValue"]]]],null],[1,"\\n    "],[10,1],[14,0,"param-name"],[12],[1,[30,1,["identifier"]]],[13],[1,"\\n\\n"]],[]],[[[41,[28,[37,1],[[30,0,["type"]],"user_list"],null],[[[1,"    "],[8,[39,6],[[16,3,[30,1,["identifier"]]]],[["@value","@onChange"],[[30,0,["value"]],[30,0,["updateValue"]]]],null],[1,"\\n    "],[10,1],[14,0,"param-name"],[12],[1,[30,1,["identifier"]]],[13],[1,"\\n\\n"]],[]],[[[1,"    "],[8,[39,5],[[16,3,[30,1,["identifier"]]]],[["@value","@onChange"],[[30,0,["value"]],[30,0,["updateValue"]]]],null],[1,"\\n    "],[10,1],[14,0,"param-name"],[12],[1,[30,1,["identifier"]]],[13],[1,"\\n  "]],[]]]],[]]]],[]]]],[]]]],[]]]],[]]],[13]],["@info"],false,["if","eq","combo-box","input","on","text-field","email-group-user-chooser","hash","group-chooser"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/param-input.hbs",isStrictMode:!1}),x={int:"int",bigint:"int",boolean:"boolean",string:"generic",time:"generic",date:"generic",datetime:"generic",double:"string",user_id:"user_id",post_id:"string",topic_id:"generic",category_id:"generic",group_id:"generic",badge_id:"generic",int_list:"generic",string_list:"generic",user_list:"user_list",group_list:"group_list"}
let w=e.default=(p=class extends r.default{constructor(){super(...arguments),y(this,"site",d,this),y(this,"value",m,this),y(this,"boolValue",h,this),y(this,"nullableBoolValue",b,this),f(this,"boolTypes",[{name:u.default.t("explorer.types.bool.true"),id:"Y"},{name:u.default.t("explorer.types.bool.false"),id:"N"},{name:u.default.t("explorer.types.bool.null_"),id:"#null"}])
const e=this.args.info.identifier,t=this.args.initialValues
if(t&&e in t){const r=t[e]
"boolean"===this.type?this.args.info.nullable?(this.nullableBoolValue=r,this.args.updateParams(this.args.info.identifier,this.nullableBoolValue)):(this.boolValue="false"!==r,this.args.updateParams(this.args.info.identifier,this.boolValue)):(this.value="category_id"===this.args.info.type?this.dasherizeCategoryId(r):r,this.args.updateParams(this.args.info.identifier,this.value))}else{const e=this.args.info.default
this.value="category_id"===this.args.info.type?this.dasherizeCategoryId(e):e,this.boolValue="false"!==e,this.nullableBoolValue=e}}get type(){const e=this.args.info.type
return"time"!==e&&"date"!==e||function(){try{const e=document.createElement("input")
return e.attributes.type="time",e.attributes.type="date",!0}catch(e){return!1}}()?x[e]||"generic":"string"}get valid(){const e=this.args.info.nullable,t=this.args.info.type
let r
if(r="boolean"===t?e?this.nullableBoolValue:this.boolValue:this.value,(0,l.isEmpty)(r))return e
const o=parseInt(r,10),i=!isNaN(o)&&o<2147483648&&o>-2147483649,n=/^\d+$/.test(r)
switch(t){case"int":return/^-?\d+$/.test(r)&&i
case"bigint":return/^-?\d+$/.test(r)&&!isNaN(o)
case"boolean":return/^Y|N|#null|true|false/.test(r)
case"double":return!isNaN(parseFloat(r))||/^(-?)Inf(inity)?$/i.test(r)||/^(-?)NaN$/i.test(r)
case"int_list":return r.split(",").every((e=>/^(-?\d+|null)$/.test(e.trim())))
case"post_id":return n||/\d+\/\d+(\?u=.*)?$/.test(r)||/\/t\/[^/]+\/(\d+)(\?u=.*)?/.test(r)
case"topic_id":return n||/\/t\/[^/]+\/(\d+)/.test(r)
case"category_id":if(n)return!!this.site.categories.find((e=>e.id===o))
if(/\//.test(r)){const e=/(.*)\/(.*)/.exec(r)
if(!e)return!1
return!!a.default.findBySlug((0,s.dasherize)(e[2]),(0,s.dasherize)(e[1]))}return!!a.default.findBySlug((0,s.dasherize)(r))
case"group_id":const e=this.site.get("groups")
return n?!!e.find((e=>e.id===o)):!!e.find((e=>e.name===r))}return!0}get allGroups(){return this.site.get("groups")}dasherizeCategoryId(e){return/^\d+$/.test(e)||e===(0,s.dasherize)(e)?e:(0,s.dasherize)(e)}updateValue(e){const t=e.target?e.target.value:e
t.length?this.value="category_id"===this.args.info.type?this.dasherizeCategoryId(t.toString()):t.toString():this.value=t,this.args.updateParams(this.args.info.identifier,this.value)}updateBoolValue(e){this.boolValue=e.target.checked,this.args.updateParams(this.args.info.identifier,this.boolValue.toString())}updateNullableBoolValue(e){this.nullableBoolValue=e,this.args.updateParams(this.args.info.identifier,this.nullableBoolValue)}updateGroupValue(e){this.value=e,this.args.updateParams(this.args.info.identifier,this.value.join(","))}},d=g(p.prototype,"site",[n.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=g(p.prototype,"value",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=g(p.prototype,"boolValue",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=g(p.prototype,"nullableBoolValue",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g(p.prototype,"updateValue",[i.action],Object.getOwnPropertyDescriptor(p.prototype,"updateValue"),p.prototype),g(p.prototype,"updateBoolValue",[i.action],Object.getOwnPropertyDescriptor(p.prototype,"updateBoolValue"),p.prototype),g(p.prototype,"updateNullableBoolValue",[i.action],Object.getOwnPropertyDescriptor(p.prototype,"updateNullableBoolValue"),p.prototype),g(p.prototype,"updateGroupValue",[i.action],Object.getOwnPropertyDescriptor(p.prototype,"updateGroupValue"),p.prototype),p);(0,t.setComponentTemplate)(v,w)})),define("discourse/plugins/discourse-data-explorer/discourse/components/param-inputs-wrapper",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"ArIoh7OG",block:'[[[41,[30,1],[[[1,"  "],[10,0],[14,0,"query-params"],[12],[1,"\\n"],[42,[28,[37,2],[[28,[37,2],[[30,2]],null]],null],null,[[[1,"      "],[8,[39,3],null,[["@params","@initialValues","@info","@updateParams"],[[30,4],[30,5],[30,3],[30,6]]],null],[1,"\\n"]],[3]],null],[1,"  "],[13],[1,"\\n"]],[]],null]],["@hasParams","@paramInfo","pinfo","@params","@initialValues","@updateParams"],false,["if","each","-track-array","param-input"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/param-inputs-wrapper.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/query-result",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/runloop","@ember/service","@ember/string","discourse/lib/ajax","discourse/models/badge","discourse/models/category","discourse-common/lib/get-url","I18n","discourse/plugins/discourse-data-explorer/discourse/components/result-types/badge","discourse/plugins/discourse-data-explorer/discourse/components/result-types/category","discourse/plugins/discourse-data-explorer/discourse/components/result-types/group","discourse/plugins/discourse-data-explorer/discourse/components/result-types/html","discourse/plugins/discourse-data-explorer/discourse/components/result-types/json","discourse/plugins/discourse-data-explorer/discourse/components/result-types/post","discourse/plugins/discourse-data-explorer/discourse/components/result-types/reltime","discourse/plugins/discourse-data-explorer/discourse/components/result-types/text","discourse/plugins/discourse-data-explorer/discourse/components/result-types/topic","discourse/plugins/discourse-data-explorer/discourse/components/result-types/url","discourse/plugins/discourse-data-explorer/discourse/components/result-types/user","@ember/template-factory"],(function(e,t,r,o,i,n,s,l,a,u,c,p,d,m,h,b,y,f,g,v,x,w,k,_,j){"use strict"
var P,O,z
function C(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function D(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const T=(0,j.createTemplateFactory)({id:"uIgeiTZ7",block:'[[[10,"article"],[12],[1,"\\n  "],[10,"header"],[14,0,"result-header"],[12],[1,"\\n    "],[10,0],[14,0,"result-info"],[12],[1,"\\n      "],[8,[39,0],null,[["@action","@icon","@label"],[[30,0,["downloadResultJson"]],"download","explorer.download_json"]],null],[1,"\\n\\n      "],[8,[39,0],null,[["@action","@icon","@label"],[[30,0,["downloadResultCsv"]],"download","explorer.download_csv"]],null],[1,"\\n\\n"],[41,[30,0,["canShowChart"]],[[[41,[30,0,["chartDisplayed"]],[[[1,"          "],[8,[39,0],null,[["@action","@icon","@label"],[[30,0,["hideChart"]],"table","explorer.show_table"]],null],[1,"\\n"]],[]],[[[1,"          "],[8,[39,0],null,[["@action","@icon","@label"],[[30,0,["showChart"]],"chart-bar","explorer.show_graph"]],null],[1,"\\n"]],[]]]],[]],null],[1,"    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"result-about"],[12],[1,"\\n      "],[1,[30,0,["resultCount"]]],[1,"\\n      "],[1,[30,0,["duration"]]],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,"br"],[12],[13],[41,[30,0,["explainText"]],[[[1,"      "],[10,"pre"],[14,0,"result-explain"],[12],[1,"        "],[10,"code"],[12],[1,[30,0,["explainText"]]],[1,"\\n        "],[13],[1,"\\n      "],[13]],[]],null],[1,"\\n    "],[10,"br"],[12],[13],[1,"\\n  "],[13],[1,"\\n\\n  "],[10,"section"],[12],[1,"\\n"],[41,[30,0,["chartDisplayed"]],[[[1,"      "],[8,[39,2],null,[["@labels","@values","@datasetName"],[[30,0,["chartLabels"]],[30,0,["chartValues"]],[30,0,["chartDatasetName"]]]],null],[1,"\\n"]],[]],[[[1,"      "],[10,"table"],[12],[1,"\\n        "],[10,"thead"],[12],[1,"\\n          "],[10,"tr"],[14,0,"headers"],[12],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["columnNames"]]],null]],null],null,[[[1,"              "],[10,"th"],[12],[1,[30,1]],[13],[1,"\\n"]],[1]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n        "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[37,4],[[28,[37,4],[[30,0,["rows"]]],null]],null],null,[[[1,"            "],[8,[39,5],null,[["@row","@columnComponents","@lookupUser","@lookupBadge","@lookupPost","@lookupTopic","@lookupGroup","@lookupCategory","@transformedPostTable","@transformedBadgeTable","@transformedUserTable","@transformedGroupTable","@transformedTopicTable","@site"],[[30,2],[30,0,["columnComponents"]],[30,0,["lookupUser"]],[30,0,["lookupBadge"]],[30,0,["lookupPost"]],[30,0,["lookupTopic"]],[30,0,["lookupGroup"]],[30,0,["lookupCategory"]],[30,0,["transformedPostTable"]],[30,0,["transformedBadgeTable"]],[30,0,["transformedUserTable"]],[30,0,["transformedGroupTable"]],[30,0,["transformedTopicTable"]],[30,0,["site"]]]],null],[1,"\\n"]],[2]],null],[1,"        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[]]],[1,"  "],[13],[1,"\\n"],[13]],["col","row"],false,["d-button","if","data-explorer-bar-chart","each","-track-array","query-row-content"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/query-result.hbs",isStrictMode:!1}),S={topic:w.default,text:x.default,post:g.default,reltime:v.default,badge:m.default,url:k.default,user:_.default,group:b.default,html:y.default,json:f.default,category:h.default}
let q=e.default=(P=class extends r.default{constructor(){super(...arguments),C(this,"site",O,this),C(this,"chartDisplayed",z,this)}get colRender(){return this.args.content.colrender||{}}get rows(){return this.args.content.rows}get columns(){return this.args.content.columns}get params(){return this.args.content.params}get explainText(){return this.args.content.explain}get chartDatasetName(){return this.columnNames[1]}get columnNames(){return this.columns?this.columns.map((e=>{if(e.endsWith("_id"))return e.slice(0,-3)
const t=e.indexOf("$")
return t>=0?e.substring(t+1):e})):[]}get columnComponents(){return this.columns?this.columns.map(((e,t)=>{let r="text"
return this.colRender[t]&&(r=this.colRender[t]),{name:r,component:S[r]}})):[]}get chartValues(){return this.rows.mapBy(1)}get colCount(){return this.columns.length}get resultCount(){const e=this.args.content.result_count
return e===this.args.content.default_limit?d.default.t("explorer.max_result_count",{count:e}):d.default.t("explorer.result_count",{count:e})}get duration(){return d.default.t("explorer.run_time",{value:d.default.toNumber(this.args.content.duration,{precision:1})})}get parameterAry(){let e=[]
for(let t in this.params)this.params.hasOwnProperty(t)&&e.push({key:t,value:this.params[t]})
return e}get transformedUserTable(){return N(this.args.content.relations.user)}get transformedBadgeTable(){return N(this.args.content.relations.badge,u.default)}get transformedPostTable(){return N(this.args.content.relations.post)}get transformedTopicTable(){return N(this.args.content.relations.topic)}get transformedGroupTable(){return N(this.site.groups)}get canShowChart(){const e=2===this.colCount,t=this.resultCount[0]>0&&"number"==typeof this.rows[0][1],r=this.colRender[1]
return e&&t&&!r}get chartLabels(){const e={user:e=>e.username,badge:e=>e.name,topic:e=>e.title,group:e=>e.name,category:e=>e.name},t=this.colRender[0]
if(t){const r=this[`lookup${(0,l.capitalize)(t)}`],o=e[t]
if(r&&o)return this.rows.map((e=>{const t=r.call(this,e[0]),i=o(t)
return this._cutChartLabel(i)}))}return this.rows.map((e=>this._cutChartLabel(e[0])))}lookupUser(e){return this.transformedUserTable[e]}lookupBadge(e){return this.transformedBadgeTable[e]}lookupPost(e){return this.transformedPostTable[e]}lookupTopic(e){return this.transformedTopicTable[e]}lookupGroup(e){return this.transformedGroupTable[e]}lookupCategory(e){return c.default.findById(e)}_cutChartLabel(e){const t=e.toString()
return t.length>25?`${t.substring(0,25)}...`:t}downloadResultJson(){this._downloadResult("json")}downloadResultCsv(){this._downloadResult("csv")}showChart(){this.chartDisplayed=!0}hideChart(){this.chartDisplayed=!1}_download_url(){return this.args.group?`/g/${this.args.group.name}/reports/`:"/admin/plugins/explorer/queries/"}_downloadResult(e){let t="xxxxxxxx".replace(/[xy]/g,(()=>(16*Math.random()|0).toString(16)))
window.open("data:text/html;base64,"+btoa("<style>body{font-size:36px;display:flex;justify-content:center;align-items:center;}</style><body>Click anywhere to close this window once the download finishes.<script>window.onclick=function(){window.close()};<\/script>"),t)
let r=document.createElement("form")
function o(e,t){let o
o=document.createElement("input"),o.setAttribute("name",e),o.setAttribute("value",t),r.appendChild(o)}r.setAttribute("id","query-download-result"),r.setAttribute("method","post"),r.setAttribute("action",(0,p.default)(this._download_url()+this.args.query.id+"/run."+e+"?download=1")),r.setAttribute("target",t),r.setAttribute("style","display:none;"),o("params",JSON.stringify(this.params)),o("explain",this.explainText),o("limit","1000000"),(0,a.ajax)("/session/csrf.json").then((e=>{o("authenticity_token",e.csrf),document.body.appendChild(r),r.submit(),(0,n.schedule)("afterRender",(()=>document.body.removeChild(r)))}))}},O=D(P.prototype,"site",[s.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=D(P.prototype,"chartDisplayed",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D(P.prototype,"downloadResultJson",[i.action],Object.getOwnPropertyDescriptor(P.prototype,"downloadResultJson"),P.prototype),D(P.prototype,"downloadResultCsv",[i.action],Object.getOwnPropertyDescriptor(P.prototype,"downloadResultCsv"),P.prototype),D(P.prototype,"showChart",[i.action],Object.getOwnPropertyDescriptor(P.prototype,"showChart"),P.prototype),D(P.prototype,"hideChart",[i.action],Object.getOwnPropertyDescriptor(P.prototype,"hideChart"),P.prototype),P)
function N(e,t){const r={}
return e.forEach((e=>{r[e.id]=t?t.create(e):e})),r}(0,t.setComponentTemplate)(T,q)})),define("discourse/plugins/discourse-data-explorer/discourse/components/query-results-wrapper",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"CMQdIpMe",block:'[[[41,[30,1],[[[1,"  "],[10,0],[14,0,"query-results"],[12],[1,"\\n"],[41,[30,2],[[[1,"      "],[8,[39,1],null,[["@query","@content"],[[30,3],[30,1]]],null],[1,"\\n"]],[]],[[[42,[28,[37,3],[[28,[37,3],[[30,1,["errors"]]],null]],null],null,[[[1,"        "],[10,"pre"],[14,0,"query-error"],[12],[10,"code"],[12],[1,[30,4]],[13],[13],[1,"\\n"]],[4]],null]],[]]],[1,"  "],[13],[1,"\\n"]],[]],null]],["@results","@showResults","@query","err"],false,["if","query-result","each","-track-array"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/query-results-wrapper.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/query-row-content",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/string","discourse/lib/utilities","discourse-common/lib/get-url","discourse/plugins/discourse-data-explorer/discourse/components/result-types/text","@ember/template-factory"],(function(e,t,r,o,i,n,s,l,a){"use strict"
var u
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const c=(0,a.createTemplateFactory)({id:"fBLn+HHd",block:'[[[10,"tr"],[12],[1,"\\n"],[42,[28,[37,1],[[28,[37,1],[[30,0,["results"]]],null]],null],null,[[[1,"    "],[10,"td"],[12],[1,"\\n      "],[8,[30,1,["component"]],null,[["@ctx","@params","@textValue"],[[30,1,["ctx"]],[30,1,["params"]],[30,1,["textValue"]]]],null],[1,"\\n    "],[13],[1,"\\n"]],[1]],null],[13]],["result"],false,["each","-track-array"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/query-row-content.hbs",isStrictMode:!1})
let p=e.default=(u=class extends r.default{get results(){return this.args.columnComponents.map(((e,t)=>{const r=this.args.row[t],o=parseInt(r,10),a={value:r,id:o,baseuri:(0,s.default)("")}
if(null===this.args.row[t])return{component:l.default,textValue:"NULL"}
if("text"===e.name)return{component:l.default,textValue:(0,n.escapeExpression)(this.args.row[t].toString())}
const u=this.args[`lookup${(0,i.capitalize)(e.name)}`]
if(u&&(a[e.name]=u.call(this.args,o)),"url"===e.name){let[e,t]=function(e){let[t,r]=[e,e]
const o=e.split(/,(.+)/)
o.length>1&&(r=o[0],t=o[1])
return[t,r]}(r)
a.href=e,a.target=t}try{return{component:e.component||l.default,ctx:a}}catch(c){return"error"}}))}},d=u.prototype,m="results",h=[o.cached],b=Object.getOwnPropertyDescriptor(u.prototype,"results"),y=u.prototype,f={},Object.keys(b).forEach((function(e){f[e]=b[e]})),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=h.slice().reverse().reduce((function(e,t){return t(d,m,e)||e}),f),y&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(y):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(d,m,f),f=null),u)
var d,m,h,b,y,f;(0,t.setComponentTemplate)(c,p)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/badge",["exports","@ember/component","@glimmer/component","@ember/template","@ember/utils","discourse-common/lib/icon-library","@ember/template-factory"],(function(e,t,r,o,i,n,s){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const l=(0,s.createTemplateFactory)({id:"V9JpgCow",block:'[[[10,3],[15,6,[29,[[30,1,["baseuri"]],"/badges/",[30,1,["badge","id"]],"/",[30,1,["badge","name"]]]]],[15,0,[29,["user-badge ",[30,1,["badge","badgeTypeClassName"]]]]],[15,"title",[30,1,["badge","display_name"]]],[15,"data-badge-name",[30,1,["badge","name"]]],[12],[1,"\\n  "],[1,[30,0,["iconOrImageReplacement"]]],[1,"\\n  "],[10,1],[14,0,"badge-display-name"],[12],[1,[30,1,["badge","display_name"]]],[13],[1,"\\n"],[13]],["@ctx"],false,[]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/badge.hbs",isStrictMode:!1})
class a extends r.default{get iconOrImageReplacement(){if((0,i.isEmpty)(this.args.ctx.badge.icon))return""
if(this.args.ctx.badge.icon.indexOf("fa-")>-1){const e=(0,n.iconHTML)((0,n.convertIconClass)(this.args.ctx.badge.icon))
return(0,o.htmlSafe)(e)}return(0,o.htmlSafe)("<img src='"+this.args.ctx.badge.icon+"'>")}}e.default=a,(0,t.setComponentTemplate)(l,a)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/category",["exports","@ember/component","@glimmer/component","discourse/helpers/category-link","@ember/template-factory"],(function(e,t,r,o,i){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const n=(0,i.createTemplateFactory)({id:"m99yca22",block:'[[[41,[30,1,["category"]],[[[1,"  "],[1,[30,0,["categoryBadgeReplacement"]]],[1,"\\n"]],[]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/t/",[30,1,["id"]]]]],[12],[1,[30,1,["id"]]],[13],[1,"\\n"]],[]]]],["@ctx"],false,["if"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/category.hbs",isStrictMode:!1})
class s extends r.default{get categoryBadgeReplacement(){return(0,o.categoryLinkHTML)(this.args.ctx.category,{allowUncategorized:!0})}}e.default=s,(0,t.setComponentTemplate)(n,s)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/group",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"AjwfIfNJ",block:'[[[41,[30,1,["group"]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/groups/",[30,1,["group","name"]]]]],[12],[1,[30,1,["group","name"]]],[13],[1,"\\n"]],[]],[[[1,"  "],[1,[30,1,["id"]]],[1,"\\n"]],[]]]],["@ctx"],false,["if"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/group.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/html",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"i0ad8qW6",block:'[[[1,[28,[35,0],[[30,1,["value"]]],null]]],["@ctx"],false,["html-safe"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/html.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/json",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","@ember/service","discourse/components/modal/fullscreen-code","@ember/template-factory"],(function(e,t,r,o,i,n,s,l){"use strict"
var a,u,c
function p(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function d(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const m=(0,l.createTemplateFactory)({id:"CYU+4LhH",block:'[[[10,0],[14,0,"result-json"],[12],[1,"\\n  "],[10,0],[14,0,"result-json-value"],[12],[1,[30,1,["value"]]],[13],[1,"\\n  "],[8,[39,0],[[24,0,"result-json-button"]],[["@action","@icon","@title"],[[28,[37,1],[[30,0],"viewJson"],null],"ellipsis-h","explorer.view_json"]],null],[1,"\\n"],[13]],["@ctx"],false,["d-button","action"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/json.hbs",isStrictMode:!1})
let h=e.default=(a=class extends r.default{constructor(){super(...arguments),p(this,"dialog",u,this),p(this,"modal",c,this)}get parsedJson(){try{return JSON.parse(this.args.ctx.value)}catch{return null}}viewJson(){this.modal.show(s.default,{model:{code:this.parsedJson?JSON.stringify(this.parsedJson,null,2):this.args.ctx.value,codeClasses:""}})}},u=d(a.prototype,"dialog",[n.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=d(a.prototype,"modal",[n.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d(a.prototype,"parsedJson",[o.cached],Object.getOwnPropertyDescriptor(a.prototype,"parsedJson"),a.prototype),d(a.prototype,"viewJson",[i.action],Object.getOwnPropertyDescriptor(a.prototype,"viewJson"),a.prototype),a);(0,t.setComponentTemplate)(m,h)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/post",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"ucTv8+JZ",block:'[[[41,[30,1,["post"]],[[[1,"  "],[10,"aside"],[14,0,"quote"],[15,"data-post",[30,1,["post","post_number"]]],[15,"data-topic",[30,1,["post","topic_id"]]],[12],[1,"\\n    "],[10,0],[14,0,"title"],[12],[1,"\\n      "],[10,0],[14,0,"quote-controls"],[12],[1,"\\n"],[1,"        "],[10,3],[15,6,[29,["/t/via-quote/",[30,1,["post","topic_id"]],"/",[30,1,["post","post_number"]]]]],[14,"title","go to the quoted post"],[14,0,"quote-other-topic"],[12],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,3],[14,0,"result-post-link"],[15,6,[29,["/t/",[30,1,["post","topic_id"]],"/",[30,1,["post","post_number"]]]]],[12],[1,"\\n        "],[1,[28,[35,1],[[30,1,["post"]]],[["imageSize"],["tiny"]]]],[1,[30,1,["post","username"]]],[1,":\\n      "],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,"blockquote"],[12],[1,"\\n      "],[10,2],[12],[1,"\\n        "],[1,[28,[35,2],[[30,1,["post","excerpt"]]],null]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n"]],[]],[[[1,"  "],[1,[30,1,["id"]]],[1,"\\n"]],[]]]],["@ctx"],false,["if","avatar","html-safe"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/post.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/reltime",["exports","@ember/component","@glimmer/component","@ember/template","discourse/lib/formatter","@ember/template-factory"],(function(e,t,r,o,i,n){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const s=(0,n.createTemplateFactory)({id:"Qf3v0/KO",block:'[[[1,[30,0,["boundDateReplacement"]]]],[],false,[]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/reltime.hbs",isStrictMode:!1})
class l extends r.default{get boundDateReplacement(){return(0,o.htmlSafe)((0,i.autoUpdatingRelativeAge)(new Date(this.args.ctx.value),{title:!0}))}}e.default=l,(0,t.setComponentTemplate)(s,l)})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/text",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"nlXzG5uv",block:'[[[1,[30,1]]],["@textValue"],false,[]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/text.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/topic",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"RxCbvO7x",block:'[[[41,[30,1,["topic"]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/t/",[30,1,["topic","slug"]],"/",[30,1,["topic","id"]]]]],[12],[1,"\\n    "],[1,[28,[35,1],[[30,1,["topic","fancy_title"]]],null]],[1,"\\n  "],[13],[1,"\\n  ("],[1,[30,1,["topic","posts_count"]]],[1,")\\n"]],[]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/t/",[30,1,["id"]]]]],[12],[1,[30,1,["id"]]],[13],[1,"\\n"]],[]]]],["@ctx"],false,["if","html-safe"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/topic.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/url",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"tVGKiwpM",block:'[[[10,3],[15,6,[30,1,["href"]]],[12],[1,[30,1,["target"]]],[13]],["@ctx"],false,[]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/url.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/result-types/user",["exports","@ember/component","@ember/component/template-only","@ember/template-factory"],(function(e,t,r,o){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const i=(0,o.createTemplateFactory)({id:"vYgS4yPl",block:'[[[41,[30,1,["user"]],[[[1,"  "],[10,3],[15,6,[29,[[30,1,["baseuri"]],"/u/",[30,1,["user","username"]],"/activity"]]],[15,"data-user-card",[30,1,["user","username"]]],[12],[1,"\\n    "],[1,[28,[35,1],[[30,1,["user"]]],[["imageSize"],["tiny"]]]],[1,"\\n    "],[1,[30,1,["user","username"]]],[1,"\\n  "],[13],[1,"\\n"]],[]],[[[1,"  "],[1,[30,1,["id"]]],[1,"\\n"]],[]]]],["@ctx"],false,["if","avatar"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/result-types/user.hbs",isStrictMode:!1})
e.default=(0,t.setComponentTemplate)(i,(0,r.default)())})),define("discourse/plugins/discourse-data-explorer/discourse/components/share-report",["exports","@ember/component","@glimmer/component","@glimmer/tracking","@ember/object","discourse-common/lib/get-url","discourse-common/utils/decorators","@ember/template-factory"],(function(e,t,r,o,i,n,s,l){"use strict"
var a,u
function c(e,t,r){var o
return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var o=r.call(e,t||"default")
if("object"!=typeof o)return o
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const d=(0,l.createTemplateFactory)({id:"g4Pe1UEy",block:'[[[10,0],[14,0,"share-report"],[12],[1,"\\n  "],[11,3],[24,6,"#"],[24,0,"share-report-button"],[4,[38,0],["click",[30,0,["open"]]],null],[12],[1,"\\n    "],[1,[28,[35,1],["link"],null]],[1,"\\n    "],[1,[30,1]],[1,"\\n  "],[13],[1,"\\n\\n"],[41,[30,0,["visible"]],[[[1,"    "],[11,0],[24,0,"popup"],[4,[38,3],[[30,0,["registerListeners"]]],null],[4,[38,4],[[30,0,["unregisterListeners"]]],null],[12],[1,"\\n      "],[10,"label"],[12],[1,[28,[35,5],["explorer.link"],null]],[1," "],[1,[30,1]],[13],[1,"\\n      "],[11,"input"],[16,2,[30,0,["link"]]],[24,4,"text"],[4,[38,3],[[30,0,["focusInput"]]],null],[12],[13],[1,"\\n\\n      "],[8,[39,6],[[24,0,"btn-flat close"]],[["@action","@icon","@aria-label","@title"],[[30,0,["close"]],"times","share.close","share.close"]],null],[1,"\\n    "],[13],[1,"\\n"]],[]],null],[13]],["@group"],false,["on","d-icon","if","did-insert","will-destroy","i18n","d-button"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/components/share-report.hbs",isStrictMode:!1})
let m=e.default=(a=class extends r.default{constructor(){var e,t,r,o
super(...arguments),e=this,t="visible",o=this,(r=u)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0}),c(this,"element",void 0)}get link(){return(0,n.default)(`/g/${this.args.group}/reports/${this.args.query.id}`)}mouseDownHandler(e){this.element.contains(e.target)||this.close()}keyDownHandler(e){27===e.keyCode&&this.close()}registerListeners(e){!e||this.isDestroying||this.isDestroyed||(this.element=e,document.addEventListener("mousedown",this.mouseDownHandler),e.addEventListener("keydown",this.keyDownHandler))}unregisterListeners(e){this.element=e,document.removeEventListener("mousedown",this.mouseDownHandler),e.removeEventListener("keydown",this.keyDownHandler)}focusInput(e){e.select(),e.focus()}open(e){e.preventDefault(),this.visible=!0}close(){this.visible=!1}},u=p(a.prototype,"visible",[o.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p(a.prototype,"mouseDownHandler",[s.bind],Object.getOwnPropertyDescriptor(a.prototype,"mouseDownHandler"),a.prototype),p(a.prototype,"keyDownHandler",[s.bind],Object.getOwnPropertyDescriptor(a.prototype,"keyDownHandler"),a.prototype),p(a.prototype,"registerListeners",[i.action],Object.getOwnPropertyDescriptor(a.prototype,"registerListeners"),a.prototype),p(a.prototype,"unregisterListeners",[i.action],Object.getOwnPropertyDescriptor(a.prototype,"unregisterListeners"),a.prototype),p(a.prototype,"focusInput",[i.action],Object.getOwnPropertyDescriptor(a.prototype,"focusInput"),a.prototype),p(a.prototype,"open",[i.action],Object.getOwnPropertyDescriptor(a.prototype,"open"),a.prototype),p(a.prototype,"close",[i.action],Object.getOwnPropertyDescriptor(a.prototype,"close"),a.prototype),a);(0,t.setComponentTemplate)(d,m)})),define("discourse/plugins/discourse-data-explorer/discourse/connectors/group-reports-nav-item/nav-item",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={shouldRender:e=>e.group.has_visible_data_explorer_queries}})),define("discourse/plugins/discourse-data-explorer/discourse/controllers/admin-plugins-explorer",["exports","@glimmer/tracking","@ember/controller","@ember/object","@ember/service","rsvp","discourse/lib/ajax","discourse/lib/ajax-error","discourse-common/utils/decorators","I18n","discourse/plugins/discourse-data-explorer/discourse/components/modal/query-help","discourse/plugins/discourse-data-explorer/discourse/models/query"],(function(e,t,r,o,i,n,s,l,a,u,c,p){"use strict"
var d,m,h,b,y,f,g,v,x,w,k,_,j,P,O,z,C,D,T
function S(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function q(e,t,r){var o
return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var o=r.call(e,t||"default")
if("object"!=typeof o)return o
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
const M=p.default.create({name:"No queries",fake:!0,group_ids:[]})
e.default=(d=class extends r.default{constructor(){super(...arguments),S(this,"modal",m,this),S(this,"dialog",h,this),S(this,"appEvents",b,this),S(this,"router",y,this),S(this,"sortByProperty",f,this),S(this,"sortDescending",g,this),S(this,"params",v,this),S(this,"search",x,this),S(this,"newQueryName",w,this),S(this,"showCreate",k,this),S(this,"editingName",_,this),S(this,"editingQuery",j,this),S(this,"selectedQueryId",P,this),S(this,"loading",O,this),S(this,"showResults",z,this),S(this,"hideSchema",C,this),S(this,"results",D,this),S(this,"dirty",T,this),q(this,"queryParams",["params",{selectedQueryId:"id"}]),q(this,"explain",!1),q(this,"acceptedImportFileTypes",["application/json"]),q(this,"order",null)}get validQueryPresent(){return!!this.selectedItem.id}get saveDisabled(){return!this.dirty}get runDisabled(){return this.dirty}get sortedQueries(){const e=this.model.sortBy(this.sortByProperty)
return this.sortDescending?e.reverse():e}get parsedParams(){return this.params?JSON.parse(this.params):null}get filteredContent(){const e=new RegExp(this.search,"i")
return this.sortedQueries.filter((t=>e.test(t.name)||e.test(t.description)))}get createDisabled(){return 0===(this.newQueryName||"").trim().length}get selectedItem(){return this.model.findBy("id",parseInt(this.selectedQueryId,10))||M}get editDisabled(){return parseInt(this.selectedQueryId,10)<0}get groupOptions(){return this.groups.filter((e=>0!==e.id)).map((e=>({id:e.id,name:e.name})))}get othersDirty(){return!!this.model.find((e=>e!==this.selectedItem&&this.dirty))}addCreatedRecord(e){this.model.pushObject(e),this.selectedQueryId=e.id,this.dirty=!1,this.setProperties({showResults:!1,results:null,editingName:!0,editingQuery:!0})}async save(){try{this.loading=!0,await this.selectedItem.save(),this.dirty=!1,this.editingName=!1}catch(e){throw(0,l.popupAjaxError)(e),e}finally{this.loading=!1}}saveAndRun(){this.save().then((()=>this.run()))}async _importQuery(e){const t=await this._readFileAsTextAsync(e),r=this._parseQuery(t),o=this.store.createRecord("query",r)
return(await o.save()).target}_parseQuery(e){const t=JSON.parse(e).query
if(!t||!t.sql)throw new TypeError
return t.id=0,t}_readFileAsTextAsync(e){return new n.Promise(((t,r)=>{const o=new FileReader
o.onload=()=>{t(o.result)},o.onerror=r,o.readAsText(e)}))}dragMove(e){if(!e.movementY&&!e.movementX)return
const t=document.querySelector(".query-editor"),r=t.querySelector(".panels-flex"),o=t.querySelector(".grippie")
this.initialPaneWidth||this.originalPaneHeight||(this.originalPaneWidth=r.clientWidth,this.originalPaneHeight=r.clientHeight)
const i=Math.max(this.originalPaneHeight,r.clientHeight+e.movementY),n=Math.max(this.originalPaneWidth,r.clientWidth+e.movementX)
r.style.height=i+"px",r.style.width=n+"px",o.style.width=n+"px",this.appEvents.trigger("ace:resize")}didStartDrag(){}didEndDrag(){}scrollTop(){window.scrollTo(0,0),this.editingName=!1,this.editingQuery=!1}updateGroupIds(e){this.dirty=!0,this.selectedItem.set("group_ids",e)}updateHideSchema(e){this.hideSchema=e}async import(e){try{this.loading=!0
const t=e[0],r=await this._importQuery(t)
this.addCreatedRecord(r)}catch(t){t.jqXHR?(0,l.popupAjaxError)(t):t instanceof SyntaxError?this.dialog.alert(u.default.t("explorer.import.unparseable_json")):t instanceof TypeError?this.dialog.alert(u.default.t("explorer.import.wrong_json")):(this.dialog.alert(u.default.t("errors.desc.unknown")),console.error(t))}finally{this.loading=!1,this.dirty=!0}}displayCreate(){this.showCreate=!0}editName(){this.editingName=!0}editQuery(){this.editingQuery=!0}download(){window.open(this.selectedItem.downloadUrl,"_blank")}goHome(){this.order=null,this.showResults=!1,this.selectedQueryId=null,this.params=null,this.sortByProperty="last_run_at",this.sortDescending=!0,this.router.transitionTo({queryParams:{id:null,params:null}})}showHelpModal(){this.modal.show(c.default)}resetParams(){this.selectedItem.resetParams()}updateSortProperty(e){this.sortByProperty===e?this.sortDescending=!this.sortDescending:(this.sortByProperty=e,this.sortDescending=!0)}async create(){try{const e=this.newQueryName.trim()
this.loading=!0,this.showCreate=!1
const t=await this.store.createRecord("query",{name:e}).save()
this.addCreatedRecord(t.target)}catch(e){(0,l.popupAjaxError)(e)}finally{this.loading=!1,this.dirty=!0}}async discard(){try{this.loading=!0
const e=await this.store.find("query",this.selectedItem.id)
this.selectedItem.setProperties(e.getProperties(p.default.updatePropertyNames)),this.selectedItem.group_ids&&Array.isArray(this.selectedItem.group_ids)||this.selectedItem.set("group_ids",[]),this.dirty=!1}catch(e){(0,l.popupAjaxError)(e)}finally{this.loading=!1}}async destroyQuery(){try{this.loading=!0,this.showResults=!1,await this.store.destroyRecord("query",this.selectedItem),this.selectedItem.set("destroyed",!0)}catch(e){(0,l.popupAjaxError)(e)}finally{this.loading=!1}}async recover(){try{this.loading=!0,this.showResults=!0,await this.selectedItem.save(),this.selectedItem.set("destroyed",!1)}catch(e){(0,l.popupAjaxError)(e)}finally{this.loading=!1}}updateParams(e,t){this.selectedItem.set(`params.${e}`,t)}updateSearch(e){this.search=e}updateNewQueryName(e){this.newQueryName=e}setDirty(){this.dirty=!0}exitEdit(){this.editingName=!1}run(){this.setProperties({loading:!0,showResults:!1,params:JSON.stringify(this.selectedItem.params)}),(0,s.ajax)("/admin/plugins/explorer/queries/"+this.selectedItem.id+"/run",{type:"POST",data:{params:JSON.stringify(this.selectedItem.params),explain:this.explain}}).then((e=>{this.results=e,e.success?this.showResults=!0:this.showResults=!1})).catch((e=>{this.showResults=!1,e.jqXHR&&422===e.jqXHR.status&&e.jqXHR.responseJSON?this.results=e.jqXHR.responseJSON:(0,l.popupAjaxError)(e)})).finally((()=>this.loading=!1))}},m=N(d.prototype,"modal",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=N(d.prototype,"dialog",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=N(d.prototype,"appEvents",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=N(d.prototype,"router",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=N(d.prototype,"sortByProperty",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"last_run_at"}}),g=N(d.prototype,"sortDescending",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=N(d.prototype,"params",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=N(d.prototype,"search",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=N(d.prototype,"newQueryName",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=N(d.prototype,"showCreate",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=N(d.prototype,"editingName",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=N(d.prototype,"editingQuery",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=N(d.prototype,"selectedQueryId",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=N(d.prototype,"loading",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=N(d.prototype,"showResults",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=N(d.prototype,"hideSchema",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=N(d.prototype,"results",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.selectedItem.results}}),T=N(d.prototype,"dirty",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N(d.prototype,"save",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"save"),d.prototype),N(d.prototype,"saveAndRun",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"saveAndRun"),d.prototype),N(d.prototype,"dragMove",[a.bind],Object.getOwnPropertyDescriptor(d.prototype,"dragMove"),d.prototype),N(d.prototype,"didStartDrag",[a.bind],Object.getOwnPropertyDescriptor(d.prototype,"didStartDrag"),d.prototype),N(d.prototype,"didEndDrag",[a.bind],Object.getOwnPropertyDescriptor(d.prototype,"didEndDrag"),d.prototype),N(d.prototype,"scrollTop",[a.bind],Object.getOwnPropertyDescriptor(d.prototype,"scrollTop"),d.prototype),N(d.prototype,"updateGroupIds",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"updateGroupIds"),d.prototype),N(d.prototype,"updateHideSchema",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"updateHideSchema"),d.prototype),N(d.prototype,"import",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"import"),d.prototype),N(d.prototype,"displayCreate",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"displayCreate"),d.prototype),N(d.prototype,"editName",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"editName"),d.prototype),N(d.prototype,"editQuery",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"editQuery"),d.prototype),N(d.prototype,"download",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"download"),d.prototype),N(d.prototype,"goHome",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"goHome"),d.prototype),N(d.prototype,"showHelpModal",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"showHelpModal"),d.prototype),N(d.prototype,"resetParams",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"resetParams"),d.prototype),N(d.prototype,"updateSortProperty",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"updateSortProperty"),d.prototype),N(d.prototype,"create",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"create"),d.prototype),N(d.prototype,"discard",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"discard"),d.prototype),N(d.prototype,"destroyQuery",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"destroyQuery"),d.prototype),N(d.prototype,"recover",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"recover"),d.prototype),N(d.prototype,"updateParams",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"updateParams"),d.prototype),N(d.prototype,"updateSearch",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"updateSearch"),d.prototype),N(d.prototype,"updateNewQueryName",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"updateNewQueryName"),d.prototype),N(d.prototype,"setDirty",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"setDirty"),d.prototype),N(d.prototype,"exitEdit",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"exitEdit"),d.prototype),N(d.prototype,"run",[o.action],Object.getOwnPropertyDescriptor(d.prototype,"run"),d.prototype),d)})),define("discourse/plugins/discourse-data-explorer/discourse/controllers/group-reports-index",["exports","@ember/controller"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class r extends t.default{}e.default=r})),define("discourse/plugins/discourse-data-explorer/discourse/controllers/group-reports-show",["exports","@glimmer/tracking","@ember/controller","@ember/object","@ember/service","discourse/components/modal/bookmark","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/bookmark","discourse/models/bookmark","discourse-common/utils/decorators"],(function(e,t,r,o,i,n,s,l,a,u,c){"use strict"
var p,d,m,h,b,y,f
function g(e,t,r,o){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}function v(e,t,r){var o
return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var o=r.call(e,t||"default")
if("object"!=typeof o)return o
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t,r,o,i){var n={}
return Object.keys(o).forEach((function(e){n[e]=o[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce((function(r,o){return o(e,t,r)||r}),n),i&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(i):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(p=class extends r.default{constructor(){super(...arguments),g(this,"currentUser",d,this),g(this,"modal",m,this),g(this,"showResults",h,this),g(this,"loading",b,this),g(this,"results",y,this),g(this,"queryGroupBookmark",f,this),v(this,"explain",!1)}get hasParams(){return this.model.param_info.length>0}get bookmarkLabel(){return this.queryGroupBookmark?"bookmarked.edit_bookmark":"bookmarked.title"}get bookmarkIcon(){return this.queryGroupBookmark&&this.queryGroupBookmark.reminder_at?u.WITH_REMINDER_ICON:u.NO_REMINDER_ICON}get bookmarkClassName(){return this.queryGroupBookmark?["query-group-bookmark","bookmarked"].join(" "):"query-group-bookmark"}async run(){this.loading=!0,this.showResults=!1
try{const e=await(0,s.ajax)(`/g/${this.get("group.name")}/reports/${this.model.id}/run`,{type:"POST",data:{params:JSON.stringify(this.model.params),explain:this.explain}})
if(this.results=e,!e.success)return
this.showResults=!0}catch(e){422===e.jqXHR?.status&&e.jqXHR.responseJSON?this.results=e.jqXHR.responseJSON:(0,l.popupAjaxError)(e)}finally{this.loading=!1}}toggleBookmark(){const e=this.queryGroupBookmark||this.store.createRecord("bookmark",{bookmarkable_type:"DiscourseDataExplorer::QueryGroup",bookmarkable_id:this.queryGroup.id,user_id:this.currentUser.id})
return this.modal.show(n.default,{model:{bookmark:new a.BookmarkFormData(e),afterSave:e=>{const t=this.store.createRecord("bookmark",e)
this.queryGroupBookmark=t,this.appEvents.trigger("bookmarks:changed",e,t.attachedTo())},afterDelete:()=>{this.queryGroupBookmark=null}}})}updateParams(e,t){this.set(`model.params.${e}`,t)}},d=x(p.prototype,"currentUser",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=x(p.prototype,"modal",[i.inject],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=x(p.prototype,"showResults",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=x(p.prototype,"loading",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=x(p.prototype,"results",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.model.results}}),f=x(p.prototype,"queryGroupBookmark",[t.tracked],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.queryGroup?.bookmark}}),x(p.prototype,"run",[c.bind],Object.getOwnPropertyDescriptor(p.prototype,"run"),p.prototype),x(p.prototype,"toggleBookmark",[o.action],Object.getOwnPropertyDescriptor(p.prototype,"toggleBookmark"),p.prototype),x(p.prototype,"updateParams",[o.action],Object.getOwnPropertyDescriptor(p.prototype,"updateParams"),p.prototype),p)})),define("discourse/plugins/discourse-data-explorer/discourse/explorer-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={resource:"admin.adminPlugins",path:"/plugins",map(){this.route("explorer")}}})),define("discourse/plugins/discourse-data-explorer/discourse/group-reports-route-map",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={resource:"group",map(){this.route("reports",(function(){this.route("show",{path:"/:query_id"})}))}}}))
define("discourse/plugins/discourse-data-explorer/discourse/initializers/initialize-data-explorer",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default={name:"initialize-data-explorer",initialize(e){e.lookup("service:store").addPluralization("query","queries")}}})),define("discourse/plugins/discourse-data-explorer/discourse/lib/themeColor",["exports"],(function(e){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return getComputedStyle(document.body).getPropertyValue(e)}})),define("discourse/plugins/discourse-data-explorer/discourse/models/query",["exports","discourse/models/rest","discourse-common/lib/get-url"],(function(e,t,r){"use strict"
function o(e,t,r){var o
return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||!e)return e
var r=e[Symbol.toPrimitive]
if(void 0!==r){var o=r.call(e,t||"default")
if("object"!=typeof o)return o
throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:o+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class i extends t.default{constructor(){super(...arguments),o(this,"params",{}),this.param_info?.resetParams()}get downloadUrl(){return(0,r.default)(`/admin/plugins/explorer/queries/${this.id}.json?export=1`)}get hasParams(){return this.param_info.length}resetParams(){const e={},t=this.params
this.param_info.forEach((r=>{const o=r.identifier
t[r.identifier]?e[o]=t[o]:null!==r.default?e[o]=r.default:"boolean"===r.type?e[o]="false":"user_id"===r.type||"user_list"===r.type||"group_list"===r.type?e[o]=null:e[o]=""})),this.params=e}updateProperties(){const e=this.getProperties(i.updatePropertyNames)
return this.destroyed&&(e.id=this.id),e}createProperties(){return this.sql?this.updateProperties():this.getProperties("name")}}e.default=i,o(i,"updatePropertyNames",["name","description","sql","user_id","created_at","group_ids","last_run_at"])})),define("discourse/plugins/discourse-data-explorer/discourse/routes/admin-plugins-explorer",["exports","discourse/lib/ajax","discourse/routes/discourse"],(function(e,t,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class o extends r.default{model(){if(!this.currentUser.admin)return{model:null,schema:null,disallow:!0,groups:null}
const e=(0,t.ajax)("/admin/plugins/explorer/groups.json"),r=(0,t.ajax)("/admin/plugins/explorer/schema.json",{cache:!0}),o=this.store.findAll("query")
return e.then((e=>{let t={}
return e.forEach((e=>{t[e.id]=e.name})),r.then((r=>o.then((o=>(o.forEach((e=>{e.set("group_names",(e.group_ids||[]).map((e=>t[e])))})),{model:o,schema:r,groups:e})))))}))}setupController(e,t){e.setProperties(t)}}e.default=o})),define("discourse/plugins/discourse-data-explorer/discourse/routes/group-reports-index",["exports","@ember/service","discourse/lib/ajax","discourse/routes/discourse"],(function(e,t,r,o){"use strict"
var i,n
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(i=class extends o.default{constructor(){var e,t,r,o
super(...arguments),e=this,t="router",o=this,(r=n)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}model(){const e=this.modelFor("group")
return(0,r.ajax)(`/g/${e.name}/reports`).then((t=>({model:t,group:e}))).catch((()=>this.router.transitionTo("group.members",e)))}afterModel(e){e.group.get("is_group_user")||this.currentUser&&this.currentUser.admin||this.router.transitionTo("group.members",e.group)}setupController(e,t){e.setProperties(t)}},s=i.prototype,l="router",a=[t.inject],u={configurable:!0,enumerable:!0,writable:!0,initializer:null},p={},Object.keys(u).forEach((function(e){p[e]=u[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=a.slice().reverse().reduce((function(e,t){return t(s,l,e)||e}),p),c&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(c):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(s,l,p),p=null),n=p,i)
var s,l,a,u,c,p})),define("discourse/plugins/discourse-data-explorer/discourse/routes/group-reports-show",["exports","@ember/service","discourse/lib/ajax","discourse/routes/discourse"],(function(e,t,r,o){"use strict"
var i,n
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(i=class extends o.default{constructor(){var e,t,r,o
super(...arguments),e=this,t="router",o=this,(r=n)&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(o):void 0})}model(e){const t=this.modelFor("group")
return(0,r.ajax)(`/g/${t.name}/reports/${e.query_id}`).then((e=>{const r=e.query,o=e.query_group,i=r.param_info.reduce(((e,t)=>(e[t.identifier]=t.default,e)),{})
return{model:Object.assign({params:i},r),group:t,queryGroup:o,results:null,showResults:!1}})).catch((()=>{this.router.transitionTo("group.members",t)}))}setupController(e,t){e.setProperties(t)}},s=i.prototype,l="router",a=[t.inject],u={configurable:!0,enumerable:!0,writable:!0,initializer:null},p={},Object.keys(u).forEach((function(e){p[e]=u[e]})),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=a.slice().reverse().reduce((function(e,t){return t(s,l,e)||e}),p),c&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(c):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(s,l,p),p=null),n=p,i)
var s,l,a,u,c,p})),define("discourse/plugins/discourse-data-explorer/discourse/templates/admin/plugins-explorer",["exports","ember-this-fallback/deprecations-helper","@ember/template-factory"],(function(e,t,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,r.createTemplateFactory)({id:"jiry2tVd",block:'[[[41,[30,0,["disallow"]],[[[1,"  "],[10,"h1"],[12],[1,[28,[35,1],["explorer.admins_only"],null]],[13],[1,"\\n"]],[]],[[[41,[51,[30,0,["validQueryPresent"]]],[[[1,"    "],[10,0],[14,0,"query-list"],[12],[1,"\\n      "],[8,[39,3],null,[["@value","@placeholderKey","@onChange"],[[30,0,["search"]],"explorer.search_placeholder",[30,0,["updateSearch"]]]],null],[1,"\\n      "],[8,[39,4],[[24,0,"no-text btn-right"]],[["@action","@icon"],[[30,0,["displayCreate"]],"plus"]],null],[1,"\\n      "],[8,[39,5],[[24,0,"import-btn"]],[["@label","@icon","@acceptedFormatsOverride","@showButton","@onFilesPicked"],["explorer.import.label","upload",[30,0,["acceptedImportFileTypes"]],"true",[30,0,["import"]]]],null],[1,"\\n    "],[13],[1,"\\n\\n"],[41,[30,0,["showCreate"]],[[[1,"      "],[10,0],[14,0,"query-create"],[12],[1,"\\n        "],[8,[39,3],null,[["@value","@placeholderKey","@onChange"],[[30,0,["newQueryName"]],"explorer.create_placeholder",[30,0,["updateNewQueryName"]]]],null],[1,"\\n        "],[8,[39,4],null,[["@action","@disabled","@label","@icon"],[[30,0,["create"]],[30,0,["createDisabled"]],"explorer.create","plus"]],null],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["othersDirty"]],[[[1,"      "],[10,0],[14,0,"warning"],[12],[1,"\\n        "],[1,[28,[35,6],["exclamation-triangle"],null]],[1,"\\n        "],[1,[28,[35,1],["explorer.others_dirty"],null]],[1,"\\n      "],[13],[1,"\\n"]],[]],null]],[]],null],[1,"\\n"],[41,[30,0,["model","length"]],[[[41,[51,[30,0,["selectedItem","fake"]]],[[[1,"      "],[10,0],[15,0,[29,["query-edit ",[52,[30,0,["editName"]],"editing"]]]],[12],[1,"\\n"],[41,[30,0,["selectedItem"]],[[[41,[30,0,["editingName"]],[[[1,"            "],[10,0],[14,0,"name"],[12],[1,"\\n              "],[8,[39,4],[[24,0,"previous"]],[["@action","@icon"],[[30,0,["goHome"]],"chevron-left"]],null],[1,"\\n              "],[8,[39,4],[[24,0,"previous"]],[["@action","@icon"],[[30,0,["exitEdit"]],"times"]],null],[1,"\\n              "],[10,0],[14,0,"name-text-field"],[12],[1,"\\n                "],[8,[39,3],null,[["@value","@onChange"],[[30,0,["selectedItem","name"]],[30,0,["setDirty"]]]],null],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n\\n            "],[10,0],[14,0,"desc"],[12],[1,"\\n              "],[8,[39,7],null,[["@value","@placeholder","@input"],[[30,0,["selectedItem","description"]],[28,[37,1],["explorer.description_placeholder"],null],[30,0,["setDirty"]]]],null],[1,"\\n            "],[13],[1,"\\n"]],[]],[[[1,"            "],[10,0],[14,0,"name"],[12],[1,"\\n              "],[8,[39,4],[[24,0,"previous"]],[["@action","@icon"],[[30,0,["goHome"]],"chevron-left"]],null],[1,"\\n\\n              "],[10,"h1"],[12],[1,"\\n                "],[1,[30,0,["selectedItem","name"]]],[1,"\\n"],[41,[51,[30,0,["editDisabled"]]],[[[1,"                  "],[11,3],[24,6,""],[24,0,"edit-query-name"],[4,[38,8],[[30,0],"editName"],null],[12],[1,"\\n                    "],[1,[28,[35,6],["pencil-alt"],null]],[1,"\\n                  "],[13],[1,"\\n"]],[]],null],[1,"              "],[13],[1,"\\n            "],[13],[1,"\\n\\n            "],[10,0],[14,0,"desc"],[12],[1,"\\n              "],[1,[30,0,["selectedItem","description"]]],[1,"\\n            "],[13],[1,"\\n"]],[]]],[1,"\\n"],[41,[51,[30,0,["selectedItem","destroyed"]]],[[[1,"            "],[10,0],[14,0,"pull-left"],[12],[1,"\\n              "],[10,0],[14,0,"groups"],[12],[1,"\\n                "],[10,1],[14,0,"label"],[12],[1,[28,[35,1],["explorer.allow_groups"],null]],[13],[1,"\\n                "],[10,1],[12],[1,"\\n                  "],[8,[39,9],null,[["@value","@content","@options","@onChange"],[[30,0,["selectedItem","group_ids"]],[30,0,["groupOptions"]],[28,[37,10],null,[["allowAny"],[false]]],[30,0,["updateGroupIds"]]]],null],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"\\n          "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n\\n"],[41,[30,0,["editingQuery"]],[[[1,"            "],[10,0],[15,0,[29,["query-editor ",[52,[30,0,["hideSchema"]],"no-schema"]]]],[12],[1,"\\n              "],[10,0],[14,0,"panels-flex"],[12],[1,"\\n                "],[10,0],[14,0,"editor-panel"],[12],[1,"\\n                  "],[8,[39,11],[[4,[38,12],["click",[30,0,["setDirty"]]],null]],[["@content","@mode","@disabled"],[[30,0,["selectedItem","sql"]],"sql",[30,0,["selectedItem","destroyed"]]]],null],[1,"\\n                "],[13],[1,"\\n\\n                "],[10,0],[14,0,"right-panel"],[12],[1,"\\n                  "],[8,[39,13],null,[["@schema","@hideSchema","@updateHideSchema"],[[30,0,["schema"]],[30,0,["hideSchema"]],[30,0,["updateHideSchema"]]]],null],[1,"\\n                "],[13],[1,"\\n              "],[13],[1,"\\n\\n              "],[11,0],[24,0,"grippie"],[4,[38,14],null,[["didStartDrag","didEndDrag","dragMove"],[[30,0,["didStartDrag"]],[30,0,["didEndDrag"]],[30,0,["dragMove"]]]]],[12],[1,"\\n                "],[1,[28,[35,6],["discourse-expand"],null]],[1,"\\n              "],[13],[1,"\\n\\n              "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n            "],[13],[1,"\\n"]],[]],[[[1,"            "],[10,0],[14,0,"sql"],[12],[1,"\\n              "],[8,[39,15],null,[["@value","@codeClass","@setDirty"],[[30,0,["selectedItem","sql"]],"sql",[30,0,["setDirty"]]]],null],[1,"\\n            "],[13],[1,"\\n"]],[]]],[1,"\\n          "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n\\n          "],[10,0],[14,0,"pull-left left-buttons"],[12],[1,"\\n"],[41,[30,0,["editingQuery"]],[[[1,"              "],[8,[39,4],null,[["@action","@label","@disabled"],[[30,0,["save"]],"explorer.save",[30,0,["saveDisabled"]]]],null],[1,"\\n"]],[]],[[[41,[51,[30,0,["editDisabled"]]],[[[1,"                "],[8,[39,4],null,[["@action","@label","@icon"],[[30,0,["editQuery"]],"explorer.edit","pencil-alt"]],null],[1,"\\n"]],[]],null]],[]]],[1,"\\n            "],[8,[39,4],null,[["@action","@label","@disabled","@icon"],[[30,0,["download"]],"explorer.export",[30,0,["runDisabled"]],"download"]],null],[1,"\\n\\n"],[41,[30,0,["editingQuery"]],[[[1,"              "],[8,[39,4],null,[["@action","@label","@icon"],[[30,0,["showHelpModal"]],"explorer.help.label","question-circle"]],null],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"pull-right right-buttons"],[12],[1,"\\n"],[41,[30,0,["selectedItem","destroyed"]],[[[1,"              "],[8,[39,4],null,[["@action","@icon","@label"],[[30,0,["recover"]],"undo","explorer.recover"]],null],[1,"\\n"]],[]],[[[41,[30,0,["editingQuery"]],[[[1,"                "],[8,[39,4],null,[["@action","@icon","@label","@disabled"],[[30,0,["discard"]],"undo","explorer.undo",[30,0,["saveDisabled"]]]],null],[1,"\\n"]],[]],null],[1,"\\n              "],[8,[39,4],[[24,0,"btn-danger"]],[["@action","@icon","@label"],[[30,0,["destroyQuery"]],"trash-alt","explorer.delete"]],null],[1,"\\n"]],[]]],[1,"          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"clear"],[12],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n\\n      "],[11,"form"],[24,0,"query-run"],[4,[38,12],["submit",[30,0,["run"]]],null],[12],[1,"\\n        "],[8,[39,16],null,[["@hasParams","@params","@initialValues","@paramInfo","@updateParams"],[[30,0,["selectedItem","hasParams"]],[30,0,["selectedItem","params"]],[30,0,["parsedParams"]],[30,0,["selectedItem","param_info"]],[30,0,["updateParams"]]]],null],[1,"\\n\\n"],[41,[30,0,["runDisabled"]],[[[41,[30,0,["saveDisabled"]],[[[1,"            "],[8,[39,4],[[24,0,"btn-primary"]],[["@label","@disabled"],["explorer.run","true"]],null],[1,"\\n"]],[]],[[[1,"            "],[8,[39,4],[[24,0,"btn-primary"]],[["@action","@icon","@label"],[[30,0,["saveAndRun"]],"play","explorer.saverun"]],null],[1,"\\n"]],[]]]],[]],[[[1,"          "],[8,[39,4],[[24,0,"btn-primary"]],[["@action","@icon","@label","@disabled","@type"],[[30,0,["run"]],"play","explorer.run",[30,0,["runDisabled"]],"submit"]],null],[1,"\\n"]],[]]],[1,"\\n        "],[10,"label"],[14,0,"query-plan"],[12],[1,"\\n          "],[8,[39,17],[[24,3,"explain"]],[["@type","@checked"],["checkbox",[30,0,["explain"]]]],null],[1,"\\n          "],[1,[28,[35,1],["explorer.explain_label"],null]],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n      "],[10,"hr"],[12],[13],[1,"\\n"]],[]],null],[1,"\\n    "],[8,[39,18],null,[["@condition"],[[30,0,["loading"]]]],null],[1,"\\n\\n"],[41,[51,[30,0,["selectedItem","fake"]]],[[[1,"      "],[8,[39,19],null,[["@results","@showResults","@query","@content"],[[30,0,["results"]],[30,0,["showResults"]],[30,0,["selectedItem"]],[30,0,["results"]]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[51,[30,0,["validQueryPresent"]]],[[[1,"      "],[10,0],[14,0,"container"],[12],[1,"\\n        "],[10,"table"],[14,0,"recent-queries"],[12],[1,"\\n          "],[10,"thead"],[14,0,"heading-container"],[12],[1,"\\n            "],[10,"th"],[14,0,"col heading name"],[12],[1,"\\n              "],[11,0],[24,"role","button"],[24,0,"heading-toggle"],[4,[38,12],["click",[28,[37,20],[[30,0,["updateSortProperty"]],"name"],null]],null],[12],[1,"\\n                "],[8,[39,21],null,[["@field","@labelKey","@order","@asc","@automatic"],["name","explorer.query_user",[30,0,["order"]],[28,[37,22],[[30,0,["sortDescending"]]],null],"true"]],null],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n            "],[10,"th"],[14,0,"col heading created-by"],[12],[1,"\\n              "],[11,0],[24,"role","button"],[24,0,"heading-toggle"],[4,[38,12],["click",[28,[37,20],[[30,0,["updateSortProperty"]],"username"],null]],null],[12],[1,"\\n                "],[8,[39,21],null,[["@field","@labelKey","@order","@asc","@automatic"],["username","explorer.query_user",[30,0,["order"]],[28,[37,22],[[30,0,["sortDescending"]]],null],"true"]],null],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n            "],[10,"th"],[14,0,"col heading group-names"],[12],[1,"\\n              "],[10,0],[14,0,"group-names-header"],[12],[1,"\\n                "],[1,[28,[35,1],["explorer.query_groups"],null]],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n            "],[10,"th"],[14,0,"col heading created-at"],[12],[1,"\\n              "],[11,0],[24,"role","button"],[24,0,"heading-toggle"],[4,[38,12],["click",[28,[37,20],[[30,0,["updateSortProperty"]],"last_run_at"],null]],null],[12],[1,"\\n                "],[8,[39,21],null,[["@field","@labelKey","@order","@asc","@automatic"],["last_run_at","explorer.query_time",[30,0,["order"]],[28,[37,22],[[30,0,["sortDescending"]]],null],"true"]],null],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n          "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[37,24],[[28,[37,24],[[30,0,["filteredContent"]]],null]],null],null,[[[1,"              "],[10,"tr"],[14,0,"query-row"],[12],[1,"\\n                "],[10,"td"],[12],[1,"\\n                  "],[11,3],[16,6,[29,["/admin/plugins/explorer/?id=",[30,1,["id"]]]]],[4,[38,12],["click",[30,0,["scrollTop"]]],null],[12],[1,"\\n                    "],[10,"b"],[14,0,"query-name"],[12],[1,[30,1,["name"]]],[13],[1,"\\n                    "],[10,"medium"],[14,0,"query-desc"],[12],[1,[30,1,["description"]]],[13],[1,"\\n                  "],[13],[1,"\\n                "],[13],[1,"\\n                "],[10,"td"],[14,0,"query-created-by"],[12],[1,"\\n"],[41,[30,1,["username"]],[[[1,"                    "],[10,3],[15,6,[29,["/u/",[30,1,["username"]],"/activity"]]],[12],[1,"\\n                      "],[10,"medium"],[12],[1,[30,1,["username"]]],[13],[1,"\\n                    "],[13],[1,"\\n"]],[]],null],[1,"                "],[13],[1,"\\n                "],[10,"td"],[14,0,"query-group-names"],[12],[1,"\\n"],[42,[28,[37,24],[[28,[37,24],[[30,1,["group_names"]]],null]],null],null,[[[1,"                    "],[8,[39,25],null,[["@group","@query"],[[30,2],[30,1]]],null],[1,"\\n"]],[2]],null],[1,"                "],[13],[1,"\\n                "],[10,"td"],[14,0,"query-created-at"],[12],[1,"\\n"],[41,[30,1,["last_run_at"]],[[[1,"                    "],[10,"medium"],[12],[1,"\\n                      "],[1,[28,[35,26],[[30,1,["last_run_at"]]],null]],[1,"\\n                    "],[13],[1,"\\n"]],[]],[[[41,[30,1,["created_at"]],[[[1,"                    "],[10,"medium"],[12],[1,"\\n                      "],[1,[28,[35,26],[[30,1,["created_at"]]],null]],[1,"\\n                    "],[13],[1,"\\n                  "]],[]],null]],[]]],[1,"                "],[13],[1,"\\n              "],[13],[1,"\\n"]],[1]],[[[1,"              "],[10,"br"],[12],[13],[1,"\\n              "],[10,"em"],[14,0,"no-search-results"],[12],[1,"\\n                "],[1,[28,[35,1],["explorer.no_search_results"],null]],[1,"\\n              "],[13],[1,"\\n"]],[]]],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n    "],[10,0],[14,0,"explorer-pad-bottom"],[12],[13],[1,"\\n"]],[]],null]],[]]],[1,[28,[32,0],["[[\\"The `selectedItem` property path was used in the `discourse/plugins/discourse-data-explorer/discourse/templates/admin/plugins-explorer.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.selectedItem}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}]]"],null]]],["query","group"],false,["if","i18n","unless","text-field","d-button","pick-files-button","d-icon","d-textarea","action","multi-select","hash","ace-editor","on","explorer-schema","draggable","code-view","param-inputs-wrapper","input","conditional-loading-spinner","query-results-wrapper","fn","table-header-toggle","not","each","-track-array","share-report","bound-date"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/admin/plugins-explorer.hbs",scope:()=>[t.default],isStrictMode:!1})})),define("discourse/plugins/discourse-data-explorer/discourse/templates/connectors/group-reports-nav-item/nav-item",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"C6vpZXij",block:'[[[8,[39,0],null,[["@route"],["group.reports"]],[["default"],[[[[1,"\\n  "],[1,[28,[35,1],["chart-bar"],null]],[1,[28,[35,2],["group.reports"],null]],[1,"\\n"]],[]]]]]],[],false,["link-to","d-icon","i18n"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/connectors/group-reports-nav-item/nav-item.hbs",isStrictMode:!1})})),define("discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-index",["exports","ember-this-fallback/deprecations-helper","@ember/template-factory"],(function(e,t,r){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,r.createTemplateFactory)({id:"mTtABkMt",block:'[[[10,"section"],[14,0,"user-content"],[12],[1,"\\n  "],[10,"table"],[14,0,"group-reports"],[12],[1,"\\n    "],[10,"thead"],[12],[1,"\\n      "],[10,"th"],[12],[1,"\\n        "],[1,[28,[35,0],["explorer.report_name"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,"th"],[12],[1,"\\n        "],[1,[28,[35,0],["explorer.query_description"],null]],[1,"\\n      "],[13],[1,"\\n      "],[10,"th"],[12],[1,"\\n        "],[1,[28,[35,0],["explorer.query_time"],null]],[1,"\\n      "],[13],[1,"\\n    "],[13],[1,"\\n    "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[37,2],[[28,[37,2],[[30,0,["model","queries"]]],null]],null],null,[[[1,"        "],[10,"tr"],[12],[1,"\\n          "],[10,"td"],[12],[1,"\\n            "],[8,[39,3],null,[["@route","@models"],["group.reports.show",[28,[37,4],[[30,0,["group","name"]],[30,1,["id"]]],null]]],[["default"],[[[[1,"\\n              "],[1,[30,1,["name"]]],[1,"\\n            "]],[]]]]],[1,"\\n          "],[13],[1,"\\n          "],[10,"td"],[12],[1,[30,1,["description"]]],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n"],[41,[30,1,["last_run_at"]],[[[1,"              "],[1,[28,[35,6],[[30,1,["last_run_at"]]],null]],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[1]],null],[1,"    "],[13],[1,"\\n  "],[13],[1,"\\n"],[13],[1,[28,[32,0],["[[\\"The `group` property path was used in the `discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-index.hbs` template without using `this`. This fallback behavior has been deprecated, all properties must be looked up on `this` when used in the template: {{this.group}}\\",false,{\\"id\\":\\"ember-this-fallback.this-property-fallback\\",\\"until\\":\\"n/a\\",\\"for\\":\\"ember-this-fallback\\",\\"url\\":\\"https://deprecations.emberjs.com/v3.x#toc_this-property-fallback\\",\\"since\\":{\\"available\\":\\"0.2.0\\"}}]]"],null]]],["query"],false,["i18n","each","-track-array","link-to","array","if","bound-date"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-index.hbs",scope:()=>[t.default],isStrictMode:!1})})),define("discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-show",["exports","@ember/template-factory"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.createTemplateFactory)({id:"5ZodjP8o",block:'[[[10,"section"],[14,0,"user-content"],[12],[1,"\\n  "],[10,"h1"],[12],[1,[30,0,["model","name"]]],[13],[1,"\\n  "],[10,2],[12],[1,[30,0,["model","description"]]],[13],[1,"\\n\\n  "],[11,"form"],[24,0,"query-run"],[4,[38,0],["submit",[30,0,["run"]]],null],[12],[1,"\\n    "],[8,[39,1],null,[["@hasParams","@params","@paramInfo","@updateParams"],[[30,0,["hasParams"]],[30,0,["model","params"]],[30,0,["model","param_info"]],[30,0,["updateParams"]]]],null],[1,"\\n\\n    "],[8,[39,2],[[24,0,"btn-primary"]],[["@action","@icon","@label","@type"],[[30,0,["run"]],"play","explorer.run","submit"]],null],[1,"\\n\\n    "],[8,[39,2],[[16,0,[30,0,["bookmarkClassName"]]]],[["@action","@label","@icon"],[[30,0,["toggleBookmark"]],[30,0,["bookmarkLabel"]],[30,0,["bookmarkIcon"]]]],null],[1,"\\n  "],[13],[1,"\\n\\n  "],[8,[39,3],null,[["@condition"],[[30,0,["loading"]]]],null],[1,"\\n\\n"],[41,[30,0,["results"]],[[[1,"    "],[10,0],[14,0,"query-results"],[12],[1,"\\n"],[41,[30,0,["showResults"]],[[[1,"        "],[8,[39,5],null,[["@query","@content","@group"],[[30,0,["model"]],[30,0,["results"]],[30,0,["group"]]]],null],[1,"\\n"]],[]],[[[42,[28,[37,7],[[28,[37,7],[[30,0,["results","errors"]]],null]],null],null,[[[1,"          "],[10,"pre"],[14,0,"query-error"],[12],[10,"code"],[12],[1,[30,1]],[13],[13],[1,"\\n"]],[1]],null]],[]]],[1,"    "],[13],[1,"\\n"]],[]],null],[13]],["err"],false,["on","param-inputs-wrapper","d-button","conditional-loading-spinner","if","query-result","each","-track-array"]]',moduleName:"discourse/plugins/discourse-data-explorer/discourse/templates/group-reports-show.hbs",isStrictMode:!1})}))

//# sourceMappingURL=discourse-data-explorer-612490bcced725d90995d0752285560553af5a02e9a51e5b6ec0a1c6c0646481.map
//!

;
