window.Dmdbase_CDC={},window.Dmdbase_CDC={cookieName:"dmdbase_cdc",dimensions:{},logging:!1,enableTNT:!1,enableStandard:!1,enableAnalytics:!0,DB_DEFAULT_VALUE:"ISP Visitor",NOT_IN_AWLIST:"Not In List",NOT_ASSIGNED_AWLIST_VALUE:"In List No Value",CompanyProfile:{},targetAttributes:["demandbase_sid","company_name","industry","sub_industry","employee_range","revenue_range","audience","audience_segment","state","country_name","marketing_alias","b2b","b2c","web_site","watch_list_account_type","watch_list_account_status"],useStorage:!0,useCookie:!0,targetReady:!1,init:function(){"true"===this.cdc_getParamByName("cdc_debug")&&(this.logging=!0)},setupDimensions:function(){this.dimensions.set1={demandbase_sid:12,company_name:40,industry:40,sub_industry:40,employee_range:30,revenue_range:30,audience:30,audience_segment:30},this.dimensions.set2={city:50,state:5,country_name:20,marketing_alias:30,placeholder5:30,placeholder6:30,placeholder7:30,placeholder8:30}},callback:function(e){if(e)try{window.Dmdbase_CDC.init(),e=this.flatten(e),window.Dmdbase_CDC.CompanyProfile=e,this.enableAnalytics&&this.setAnalytics(window.Dmdbase_CDC.CompanyProfile),this.enableTNT&&this.setMbox(window.Dmdbase_CDC.CompanyProfile)}catch(e){window.console&&this.logging&&console.log("DB _ "+e.message)}},loadAnalytics:function(){this.setAnalytics(window.Dmdbase_CDC.CompanyProfile)},setAnalytics:function(e){try{if(this.setupDimensions(),window.sessionStorage){var t=sessionStorage.getItem("s_dmdbase"),i=sessionStorage.getItem("s_dmdbase_detail");i&&"Basic"===i&&this.storeSessionData(e),!t&&this.isCookieSet(this.cookieName)&&this.storeSessionData(e)}this.isCookieSet(this.cookieName)||this.storeSessionData(e)}catch(e){window.console&&this.logging&&console.log("DB _ "+e.message)}},storeSessionData:function(e){var t=this.buildDelimitedStrings(":",e);if(this.isCookieSet(this.cookieName)||this.saveToCookie(this.cookieName,"DBSET",1),Dmdbase_CDC.contextData=t,window.sessionStorage&&this.useStorage){sessionStorage.setItem("s_dmdbase",Dmdbase_CDC.contextData[0]),sessionStorage.setItem("s_dmdbase_detail",e.information_level);for(var i=1;i<Dmdbase_CDC.contextData.length;i++)sessionStorage.setItem("s_dmdbase_custom"+i,Dmdbase_CDC.contextData[i])}},setMbox:function(e){try{this.enableStandard?this.set_mbox_variables(e):null!==window.TNT&&"object"==typeof window.TNT&&this.set_mbox_variables(e)}catch(e){window.console&&this.logging&&console.log("DB _ "+e.message)}},flatten:function(e){for(var t in e)if("object"==typeof e[t]&&null!==e[t]&&e.hasOwnProperty(t)){for(var i in e[t])e[t].hasOwnProperty(i)&&(e[t+"_"+i]=e[t][i]);delete e[t]}return e},saveToCookie:function(e,t){var i=new Date;i.setTime(i.getTime()+18e5);var n="; expires="+i.toGMTString(),s=document.location.href,o="; domain="+this.getDomain(s);document.cookie=e+"="+encodeURIComponent(t)+n+o+"; path=/"},getCookieByName:function(e){e+="=";for(var t=document.cookie.split(";"),i=0;i<t.length;i++){for(var n=t[i];" "==n.charAt(0);)n=n.substring(1);if(-1!=n.indexOf(e))return decodeURIComponent(n.substring(e.length,n.length))}return""},getHostName:function(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^\/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2]:null},getDomain:function(e){var t=this.getHostName(e),i=t;if(null!=t){var n=t.split(".").reverse();null!=n&&n.length>1&&(i="."+n[1]+"."+n[0],-1!=t.toLowerCase().indexOf(".co.uk")&&n.length>2&&(i="."+n[2]+"."+i))}return i},isCookieSet:function(e){var t=this.getCookieByName(e);return t&&"undefined"!=t},buildDelimitedStrings:function(e,t){var i=this.dimensions,n=[];for(var s in i)if(i.hasOwnProperty(s)){var o="";for(var a in i[s])if(i[s].hasOwnProperty(a)){var r="";r=-1!=a.indexOf("watch_list")&&"Detailed"===t.information_level&&t.hasOwnProperty(a)?this.truthy(t[a],this.NOT_ASSIGNED_AWLIST_VALUE):-1==a.indexOf("watch_list")||"Detailed"!==t.information_level||t.hasOwnProperty(a)?this.truthy(t[a],this.DB_DEFAULT_VALUE):this.truthy(t[a],this.NOT_IN_AWLIST);var l=i[s][a];o+=(r=this.resizeStr(r,l))+e}o=o.substring(0,o.length-1),o=this.resizeStr(o,255),n.push(o)}return n},resizeStr:function(e,t){return e.length>t&&(e=e.substring(0,t)),e},truthy:function(e,t){return e||(!1===e?e:t)},cdc_getParamByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},set_mbox_variables:function(e){try{var t="";for(var i in e)if(e.hasOwnProperty(i)&&-1!=this.targetAttributes.indexOf(i)){var n="profile."+i+"="+e[i]+",";t+=n}t=t.split(","),this.enableStandard?(window.targetPageParams=function(){return t},window.targetPageParams(),window.Dmdbase_CDC.targetReady=!0):"undefined"!=typeof mboxFactoryDefault&&mboxFactoryDefault.getUrlBuilder().addParameters(t)}catch(e){console.log(e)}}};
